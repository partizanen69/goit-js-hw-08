{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst formFieldsKey = 'feedback-form-state';\n\nwindow.onload = () => {\n  const formValues = {\n    email: '',\n    message: '',\n  };\n\n  const form = document.querySelector('.feedback-form');\n  const emailInput = form.querySelector('input[name=\"email\"]');\n  const messageInput = form.querySelector('textarea[name=\"message\"]');\n  const submitBtn = form.querySelector('button[type=\"submit\"]');\n\n  try {\n    const values = JSON.parse(localStorage.getItem(formFieldsKey)) || {};\n    formValues.email = values.email || '';\n    formValues.message = values.message || '';\n  } catch (err) {\n    console.error('Could not parse form data from localstorage', err);\n  }\n\n  emailInput.value = formValues.email;\n  messageInput.value = formValues.message;\n\n  form.addEventListener(\n    'input',\n    throttle(e => {\n      formValues[e.target.name] = e.target.value;\n      localStorage.setItem(formFieldsKey, JSON.stringify(formValues));\n    }, 500)\n  );\n\n  submitBtn.addEventListener('click', e => {\n    e.preventDefault();\n\n    console.log(formValues);\n\n    localStorage.removeItem(formFieldsKey);\n    formValues.email = '';\n    formValues.message = '';\n\n    emailInput.value = '';\n    messageInput.value = '';\n  });\n};\n"],"names":["formFieldsKey","formValues","form","emailInput","messageInput","submitBtn","values","err","throttle","e"],"mappings":"wIAEA,MAAMA,EAAgB,sBAEtB,OAAO,OAAS,IAAM,CACpB,MAAMC,EAAa,CACjB,MAAO,GACP,QAAS,EACb,EAEQC,EAAO,SAAS,cAAc,gBAAgB,EAC9CC,EAAaD,EAAK,cAAc,qBAAqB,EACrDE,EAAeF,EAAK,cAAc,0BAA0B,EAC5DG,EAAYH,EAAK,cAAc,uBAAuB,EAE5D,GAAI,CACF,MAAMI,EAAS,KAAK,MAAM,aAAa,QAAQN,CAAa,CAAC,GAAK,GAClEC,EAAW,MAAQK,EAAO,OAAS,GACnCL,EAAW,QAAUK,EAAO,SAAW,EACxC,OAAQC,EAAP,CACA,QAAQ,MAAM,8CAA+CA,CAAG,CACjE,CAEDJ,EAAW,MAAQF,EAAW,MAC9BG,EAAa,MAAQH,EAAW,QAEhCC,EAAK,iBACH,QACAM,EAASC,GAAK,CACZR,EAAWQ,EAAE,OAAO,MAAQA,EAAE,OAAO,MACrC,aAAa,QAAQT,EAAe,KAAK,UAAUC,CAAU,CAAC,CAC/D,EAAE,GAAG,CACV,EAEEI,EAAU,iBAAiB,QAASI,GAAK,CACvCA,EAAE,eAAc,EAEhB,QAAQ,IAAIR,CAAU,EAEtB,aAAa,WAAWD,CAAa,EACrCC,EAAW,MAAQ,GACnBA,EAAW,QAAU,GAErBE,EAAW,MAAQ,GACnBC,EAAa,MAAQ,EACzB,CAAG,CACH"}