{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-video.js"],"sourcesContent":["import Player from '@vimeo/player';\nimport throttle from 'lodash.throttle';\n\nconst lastPlayedSecondsKey = 'videoplayer-current-time';\n\nwindow.onload = () => {\n  const player = new Player(document.querySelector('iframe#vimeo-player'));\n\n  let secondsVideoPlayed = null;\n\n  try {\n    const seconds = JSON.parse(localStorage.getItem(lastPlayedSecondsKey));\n    if (typeof seconds === 'number') {\n      secondsVideoPlayed = seconds;\n    } else {\n      console.warn(\n        'secondsVideoPlayed parsed from localStorage was not a number:',\n        secondsVideoPlayed,\n        '. Setting it to 0'\n      );\n    }\n  } catch (err) {\n    console.error(\n      'Could not parse last secondsVideoPlayed from localStorage because of error',\n      err\n    );\n  }\n\n  if (secondsVideoPlayed === null) {\n    secondsVideoPlayed = 0;\n  }\n\n  player.setCurrentTime(secondsVideoPlayed).catch(function (error) {\n    switch (error.name) {\n      case 'RangeError':\n        console.error(\n          'the time was less than 0 or greater than the videoâ€™s duration'\n        );\n        break;\n\n      default:\n        console.error('some other error occurred', error);\n        break;\n    }\n  });\n\n  player.on(\n    'timeupdate',\n    throttle(message => {\n      const { seconds } = message;\n      localStorage.setItem(lastPlayedSecondsKey, JSON.stringify(seconds));\n    }, 1000)\n  );\n};\n"],"names":["lastPlayedSecondsKey","player","Player","secondsVideoPlayed","seconds","err","error","throttle","message"],"mappings":"+IAGA,MAAMA,EAAuB,2BAE7B,OAAO,OAAS,IAAM,CACpB,MAAMC,EAAS,IAAIC,EAAO,SAAS,cAAc,qBAAqB,CAAC,EAEvE,IAAIC,EAAqB,KAEzB,GAAI,CACF,MAAMC,EAAU,KAAK,MAAM,aAAa,QAAQJ,CAAoB,CAAC,EACjE,OAAOI,GAAY,SACrBD,EAAqBC,EAErB,QAAQ,KACN,gEACAD,EACA,mBACR,CAEG,OAAQE,EAAP,CACA,QAAQ,MACN,6EACAA,CACN,CACG,CAEGF,IAAuB,OACzBA,EAAqB,GAGvBF,EAAO,eAAeE,CAAkB,EAAE,MAAM,SAAUG,EAAO,CAC/D,OAAQA,EAAM,KAAI,CAChB,IAAK,aACH,QAAQ,MACN,+DACV,EACQ,MAEF,QACE,QAAQ,MAAM,4BAA6BA,CAAK,EAChD,KACH,CACL,CAAG,EAEDL,EAAO,GACL,aACAM,EAASC,GAAW,CAClB,KAAM,CAAE,QAAAJ,CAAS,EAAGI,EACpB,aAAa,QAAQR,EAAsB,KAAK,UAAUI,CAAO,CAAC,CACnE,EAAE,GAAI,CACX,CACA"}